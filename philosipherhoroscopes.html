<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philo Siphers Horoscopes</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Cinzel', serif; background: linear-gradient(135deg, #1a0033, #660066); color: #fff; padding: 2vh; min-height: 100vh; overflow-x: hidden; position: relative; }
        body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://images.pexels.com/photos/957040/night-sky-2/pexels-photo-957040.jpeg') no-repeat center center/cover; opacity: 0.15; z-index: -1; animation: twinkle 10s infinite; }
        .shooting-star { position: fixed; width: 3px; height: 3px; background: #ffffff; border-radius: 50%; z-index: 0; pointer-events: none; animation: shoot linear infinite, pulseGlow 0.5s infinite alternate; }
        @keyframes shoot { 0% { transform: translate(0, 0) scale(1); opacity: 1; box-shadow: 0 0 20px #ffffff, 0 0 40px #ffcc00, 0 0 60px #cc33ff; } 100% { transform: translate(-400px, 400px) scale(0.5); opacity: 0; box-shadow: 0 0 10px #ffffff, 0 0 20px #ffcc00, 0 0 30px #cc33ff; } }
        @keyframes pulseGlow { 0% { box-shadow: 0 0 20px #ffffff, 0 0 40px #ffcc00, 0 0 60px #cc33ff; } 100% { box-shadow: 0 0 30px #ffffff, 0 0 50px #ff9900, 0 0 80px #66ccff; } }
        .shooting-star:nth-child(1) { top: 10%; left: 80%; animation-duration: 2s; animation-delay: 0s; }
        .shooting-star:nth-child(2) { top: 20%; left: 60%; animation-duration: 2.5s; animation-delay: 1s; }
        .shooting-star:nth-child(3) { top: 30%; left: 90%; animation-duration: 1.8s; animation-delay: 2s; }
        .shooting-star:nth-child(4) { top: 40%; left: 70%; animation-duration: 2.2s; animation-delay: 3s; }
        .shooting-star:nth-child(5) { top: 50%; left: 85%; animation-duration: 2.3s; animation-delay: 4s; }
        @keyframes twinkle { 0%, 100% { opacity: 0.15; } 50% { opacity: 0.3; } }
        .container { max-width: 90vw; margin: 5vh auto; padding: 3vw; background: rgba(0, 0, 0, 0.6); border-radius: 15px; box-shadow: 0 0 30px rgba(255, 255, 255, 0.2); position: relative; overflow: hidden; z-index: 1; }
        .container::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255, 204, 0, 0.1), transparent); animation: cosmicPulse 15s infinite; z-index: -1; }
        @keyframes cosmicPulse { 0%, 100% { transform: scale(1); opacity: 0.1; } 50% { transform: scale(1.2); opacity: 0.2; } }
        h1 { color: #ffcc00; font-size: clamp(2em, 6vw, 3.5em); text-shadow: 0 0 15px #ffcc00, 0 0 25px #ff9900; animation: glow 2s infinite alternate; margin-bottom: 2vh; text-align: center; }
        @keyframes glow { from { text-shadow: 0 0 10px #ffcc00, 0 0 20px #ff9900; } to { text-shadow: 0 0 20px #ffcc00, 0 0 30px #ff9900; } }
        nav { background: rgba(75, 0, 130, 0.6); padding: 1vh; border-radius: 10px; margin-bottom: 2vh; position: relative; z-index: 1; }
        nav ul { list-style: none; display: flex; flex-wrap: wrap; justify-content: center; }
        nav ul li a { color: #fff; text-decoration: none; padding: 1vh 2vw; font-size: clamp(1em, 3vw, 1.3em); transition: all 0.3s ease; text-shadow: 0 0 5px #fff; }
        nav ul li a:hover { color: #ffcc00; transform: scale(1.1); text-shadow: 0 0 10px #ffcc00; }
        .input-group { margin: 2vh 0; opacity: 0; animation: slideIn 1s forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        input, select { padding: 2vw; width: 100%; max-width: 300px; margin: 1vh auto; border: 2px solid #ffcc00; border-radius: 8px; font-size: clamp(0.9em, 3vw, 1.1em); display: block; background: rgba(255, 255, 255, 0.1); color: #fff; transition: all 0.3s; }
        input:focus, select:focus { border-color: #ff9900; box-shadow: 0 0 10px #ff9900; outline: none; }
        button { padding: 2vh 4vw; background: linear-gradient(45deg, #4b0082, #ffcc00); color: #fff; border: none; border-radius: 8px; font-size: clamp(1em, 3.5vw, 1.2em); cursor: pointer; transition: all 0.3s; width: 100%; max-width: 200px; margin: 2vh auto; display: block; text-shadow: 0 0 5px #000; animation: buttonPulse 2s infinite; }
        @keyframes buttonPulse { 0%, 100% { box-shadow: 0 0 10px #ffcc00; } 50% { box-shadow: 0 0 20px #ff9900; } }
        button:hover { transform: scale(1.05); background: linear-gradient(45deg, #ffcc00, #4b0082); }
        #result { margin-top: 3vh; text-align: left; display: none; animation: starryFade 1s ease-in forwards; }
        @keyframes starryFade { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .reading-list { list-style: none; padding: 0; }
        .reading-list li { margin: 2vh 0; padding: 2vw; background: rgba(255, 255, 255, 0.1); border-radius: 10px; opacity: 0; animation: fadeIn 1s forwards; display: flex; align-items: center; transition: all 0.3s; }
        .reading-list li:hover { background: rgba(255, 255, 255, 0.2); transform: translateX(10px); box-shadow: 0 0 15px rgba(255, 204, 0, 0.5); }
        @keyframes fadeIn { to { opacity: 1; } }
        .reading-list li .symbol { width: clamp(40px, 10vw, 60px); height: clamp(40px, 10vw, 60px); margin-right: 2vw; border-radius: 50%; background: rgba(255, 204, 0, 0.3); display: flex; align-items: center; justify-content: center; font-size: clamp(1.5em, 5vw, 2em); color: #ffcc00; text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); animation: symbolGlow 3s infinite; }
        @keyframes symbolGlow { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .reading-list li span { font-size: clamp(0.9em, 3vw, 1em); text-shadow: 0 0 5px rgba(255, 255, 255, 0.3); }
        .past { color: #ff9999; font-weight: bold; }
        .present { color: #99ff99; font-weight: bold; }
        .future { color: #9999ff; font-weight: bold; }
        #save-button { background: linear-gradient(45deg, #6a0dad, #ff9900); }
        #share-button { background: linear-gradient(45deg, #00ccff, #ff33cc); }
        #audio-toggle { position: fixed; bottom: 2vh; right: 2vw; padding: 1.5vh; background: #4b0082; color: #fff; border-radius: 50%; font-size: clamp(1em, 4vw, 1.5em); cursor: pointer; z-index: 10; box-shadow: 0 0 10px #ffcc00; }
        @media (max-width: 768px) { nav ul { flex-direction: column; align-items: center; } .reading-list li { flex-direction: column; text-align: center; } .reading-list li .symbol { margin: 0 auto 1vh; } }
    </style>
</head>
<body>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="container">
        <h1>Philo Siphers Horoscopes</h1>
        <nav>
            <ul>
                <li><a href="#" onclick="playMenuSound(); generateHoroscope()">Cast Your Cosmic Reading</a></li>
            </ul>
        </nav>
        <div class="input-group">
            <input type="text" id="name" placeholder="Your Sacred Name" required>
        </div>
        <div class="input-group" style="animation-delay: 0.2s;">
            <input type="date" id="dob" required>
        </div>
        <div class="input-group" style="animation-delay: 0.4s;">
            <select id="country" required>
                <option value="" disabled selected>Realm of Origin</option>
                <option value="USA">USA</option>
                <option value="UK">UK</option>
                <option value="India">India</option>
                <option value="China">China</option>
                <option value="Brazil">Brazil</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div class="input-group" style="animation-delay: 0.6s;">
            <button onclick="playButtonSound(); generateHoroscope()">Unveil Celestial Truths</button>
        </div>
        <div id="result">
            <ul class="reading-list" id="reading-list"></ul>
            <button id="save-button" onclick="playButtonSound(); saveReading()">Preserve Your Prophecy</button>
            <button id="share-button" onclick="playButtonSound(); shareReading()">Share Your Prophecy</button>
        </div>
    </div>
    <audio id="bgMusic" loop></audio>
    <audio id="menuSound"></audio>
    <audio id="buttonSound"></audio>
    <div id="audio-toggle" onclick="toggleAudio()">🔊</div>

    <script>
        const bgMusic = document.getElementById("bgMusic");
        const menuSound = document.getElementById("menuSound");
        const buttonSound = document.getElementById("buttonSound");
        bgMusic.volume = 0.2;
        menuSound.volume = 0.5;
        buttonSound.volume = 0.5;

        const staticMusicMap = {
            "Spiritual": "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Kevin_MacLeod/Contemporary/Kevin_MacLeod_-_Meditation_Impromptu_02.mp3",
            "MenuClick": "https://freesound.org/data/previews/245/245645_4055516-lq.mp3",
            "ButtonClick": "https://freesound.org/data/previews/242/242999_4055516-lq.mp3"
        };

        function toggleAudio() {
            if (bgMusic.paused) { bgMusic.play(); document.getElementById("audio-toggle").textContent = "🔊"; }
            else { bgMusic.pause(); document.getElementById("audio-toggle").textContent = "🔇"; }
        }

        function playMenuSound() { menuSound.src = staticMusicMap["MenuClick"]; menuSound.play(); }
        function playButtonSound() { buttonSound.src = staticMusicMap["ButtonClick"]; buttonSound.play(); }
        bgMusic.src = staticMusicMap["Spiritual"]; bgMusic.play();

        function getZodiacSign(day, month) {
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "Aries";
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return "Taurus";
            if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return "Gemini";
            if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return "Cancer";
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return "Leo";
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return "Virgo";
            if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return "Libra";
            if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return "Scorpio";
            if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return "Sagittarius";
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return "Capricorn";
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return "Aquarius";
            if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) return "Pisces";
        }

        function getElement(sign) {
            const elements = { "Aries": "Fire", "Leo": "Fire", "Sagittarius": "Fire", "Taurus": "Earth", "Virgo": "Earth", "Capricorn": "Earth", "Gemini": "Air", "Libra": "Air", "Aquarius": "Air", "Cancer": "Water", "Scorpio": "Water", "Pisces": "Water" };
            return elements[sign];
        }

        function getChineseZodiac(year) {
            const animals = ["Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake", "Horse", "Goat", "Monkey", "Rooster", "Dog", "Pig"];
            return animals[(year - 4) % 12];
        }

        function getCelticTree(day, month) {
            if ((month === 12 && day >= 24) || (month === 1 && day <= 20)) return "Birch";
            return "Oak";
        }

        function getNativeAmericanSign(day, month) {
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "Falcon";
            return "Wolf";
        }

        function getNordicRune(day, month) {
            if ((month === 12 && day >= 24) || (month === 1 && day <= 20)) return "Fehu";
            return "Ansuz";
        }

        function getPaganSabbat(day, month) {
            if (month === 2 && day >= 1 && day <= 2) return "Imbolc";
            return "Samhain";
        }

        function getHinduNakshatra(day, month) {
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "Ashwini";
            return "Krittika";
        }

        function getBuddhistElement(year) {
            const elements = ["Wood", "Fire", "Earth", "Metal", "Water"];
            return elements[(year - 4) % 5];
        }

        function getEgyptianGod(day, month) {
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "Osiris";
            return "Anubis";
        }

        function getMayanSign(day, month) {
            if ((month === 3 && day >= 21) || (month === 4 && day <= 9)) return "Crocodile";
            return "Serpent";
        }

        function getLifePathNumber(day, month, year) {
            const sum = (day + month + year).toString().split('').reduce((a, b) => a + parseInt(b), 0);
            return sum > 9 ? getLifePathNumber(sum, 0, 0) : sum;
        }

        const symbolMap = {
            "Aries": "♈", "Taurus": "♉", "Gemini": "♊", "Cancer": "♋", "Leo": "♌", "Virgo": "♍", "Libra": "♎", "Scorpio": "♏", "Sagittarius": "♐", "Capricorn": "♑", "Aquarius": "♒", "Pisces": "♓",
            "Rat": "🐀", "Ox": "🐂", "Tiger": "🐅", "Rabbit": "🐇", "Dragon": "🐉", "Snake": "🐍", "Horse": "🐎", "Goat": "🐐", "Monkey": "🐒", "Rooster": "🐓", "Dog": "🐕", "Pig": "🐖",
            "Birch": "🌿", "Oak": "🌳", "Falcon": "🦅", "Wolf": "🐺", "Fehu": "ᚠ", "Ansuz": "ᚨ", "Imbolc": "🕯️", "Samhain": "🎃", "Ashwini": "⭐", "Krittika": "🔥",
            "Wood": "🌲", "Fire": "🔥", "Earth": "⛰️", "Metal": "⚙️", "Water": "💧", "Osiris": "𓀭", "Anubis": "🐺", "Crocodile": "🐊", "Serpent": "🐍",
            "1": "1️⃣", "2": "2️⃣", "3": "3️⃣", "4": "4️⃣", "5": "5️⃣", "6": "6️⃣", "7": "7️⃣", "8": "8️⃣", "9": "9️⃣", "333": "🕉️",
            "USA": "🇺🇸", "UK": "🇬🇧", "India": "🇮🇳", "China": "🇨🇳", "Brazil": "🇧🇷", "Other": "🌍", "MysticMeg": "🔮"
        };

        const staticReadings = {
            "MysticMeg": { past: "Beneath the veiled moons of your youth, ${name}, a sacred fire burned through ${country}’s mists, forging your spirit in trials only the stars recall.", future: "Three threads of fate will cross your path in ${country}, ${name}—a knock, a whisper, a shadow—guiding you to a destiny where love and labor bloom as one." },
            "Aries": { past: "In the crimson dawn of ${country}, ${name}, Mars anointed your soul with a warrior’s flame, leading you through battles of will to claim your inner throne.", future: "A fiery comet streaks toward your horizon, ${name}—embrace the bold call to lead, for in ${country}’s embrace, your courage will carve a legacy in the stars." },
            "Taurus": { past: "Rooted in ${country}’s ancient earth, ${name}, your spirit grew like a steadfast oak, drawing strength from silent seasons of patience and toil.", future: "A golden harvest awaits you, ${name}, in ${country}’s fertile fields—trust the slow dance of time, for abundance flows to those who nurture their roots." },
            "Gemini": { past: "In ${country}’s windswept realms, ${name}, your twin souls danced through shifting skies, weaving words of power from the ether’s breath.", future: "A double star rises in ${country}, ${name}—seek the mirror of truth, for your voice will bridge worlds and guide lost hearts home." },
            "Cancer": { past: "Beneath ${country}’s moonlit tides, ${name}, your heart cradled the ocean’s secrets, growing strong in the ebb of hidden currents.", future: "A silver wave crashes in ${country}, ${name}—trust your intuition, for it will lead you to a sanctuary of love and eternal renewal." },
            "Leo": { past: "In ${country}’s golden dawn, ${name}, the Sun crowned your spirit with regal fire, illuminating paths through shadows with your roar.", future: "A lion’s throne awaits in ${country}, ${name}—shine unapologetically, for your light will draw followers to a kingdom of joy." },
            "Virgo": { past: "Amid ${country}’s quiet fields, ${name}, your soul wove precision into the fabric of existence, healing the world with humble hands.", future: "A harvest moon glows in ${country}, ${name}—perfect your craft, for your diligence will unveil a treasure of purpose." },
            "Libra": { past: "In ${country}’s balanced skies, ${name}, your spirit sought harmony, tipping scales with grace through storms of discord.", future: "A dove flies over ${country}, ${name}—choose peace, for your equilibrium will mend bridges and birth beauty." },
            "Scorpio": { past: "Deep in ${country}’s shadowed depths, ${name}, your soul danced with the scorpion’s sting, rising anew from ashes of the past.", future: "A phoenix soars in ${country}, ${name}—embrace transformation, for your power will pierce veils and claim the eternal." },
            "Sagittarius": { past: "Across ${country}’s wild plains, ${name}, your arrow flew free, seeking truth in the vastness of untamed horizons.", future: "A distant star calls in ${country}, ${name}—ride the wind, for your quest will unveil wisdom beyond the known." },
            "Capricorn": { past: "On ${country}’s rugged peaks, ${name}, your spirit climbed with goat’s resolve, building foundations from stone and time.", future: "A summit shines in ${country}, ${name}—persist, for your ambition will crown you with enduring glory." },
            "Aquarius": { past: "In ${country}’s electric air, ${name}, your soul sparked revolutions, pouring water of vision into a thirsty world.", future: "A storm brews in ${country}, ${name}—dream boldly, for your rebellion will reshape the tides of tomorrow." },
            "Pisces": { past: "Beneath ${country}’s mystic waves, ${name}, your spirit swam in dreams, weaving compassion from the ocean’s depths.", future: "A fish leaps in ${country}, ${name}—surrender to the flow, for your empathy will heal and unite the unseen." },
            "Rat": { past: "In the shadowed alleys of ${country}, ${name}, your cunning wove a tapestry of survival, outsmarting fate with lunar tides.", future: "A silver key glints in ${country}’s dawn, ${name}—seize it, for doors of opportunity swing wide under the Rat’s stars." },
            "Ox": { past: "Through ${country}’s furrowed fields, ${name}, your strength plowed the earth, bearing burdens with a quiet, unyielding heart.", future: "A steady dawn breaks in ${country}, ${name}—endure, for your labor will yield a harvest of unshakable peace." },
            "Tiger": { past: "In ${country}’s fierce jungles, ${name}, your roar shook the silence, stalking destiny with a predator’s grace.", future: "A striped shadow prowls ${country}, ${name}—strike boldly, for your ferocity will claim a throne of power." },
            "Rabbit": { past: "Beneath ${country}’s gentle moons, ${name}, your spirit hopped through life’s maze, finding safety in swift leaps of faith.", future: "A burrow glows in ${country}, ${name}—trust your instincts, for your agility will lead to a haven of joy." },
            "Dragon": { past: "Above ${country}’s ancient skies, ${name}, your wings stirred storms, breathing fire into the void of forgotten ages.", future: "A dragon’s flame lights ${country}, ${name}—rise fearlessly, for your might will forge a legend eternal." },
            "Snake": { past: "In ${country}’s coiled shadows, ${name}, your wisdom slithered through secrets, shedding skins to reveal your truth.", future: "A serpent’s eye gleams in ${country}, ${name}—shed old fears, for your insight will unravel mysteries of the soul." },
            "Horse": { past: "Across ${country}’s boundless plains, ${name}, your hooves thundered free, chasing horizons with untamed spirit.", future: "A wild gallop awaits in ${country}, ${name}—run unbound, for your journey will break chains and find freedom." },
            "Goat": { past: "On ${country}’s steep cliffs, ${name}, your sure feet climbed, balancing dreams against the winds of challenge.", future: "A peak beckons in ${country}, ${name}—ascend steadily, for your resolve will plant a flag of triumph." },
            "Monkey": { past: "In ${country}’s playful canopy, ${name}, your mischief swung through branches, crafting joy from chaos with clever hands.", future: "A trickster’s laugh echoes in ${country}, ${name}—play wisely, for your ingenuity will unlock unexpected riches." },
            "Rooster": { past: "At ${country}’s fiery dawn, ${name}, your crow heralded light, strutting through life with a proud, vibrant plume.", future: "A sunrise calls in ${country}, ${name}—proclaim your truth, for your boldness will awaken a new day of glory." },
            "Dog": { past: "In ${country}’s loyal fields, ${name}, your heart guarded the pack, standing firm through nights of howling winds.", future: "A faithful star shines in ${country}, ${name}—protect your kin, for your devotion will forge an unbreakable bond." },
            "Pig": { past: "Amid ${country}’s rich earth, ${name}, your soul rooted in abundance, finding treasure in the mud of honest days.", future: "A feast spreads in ${country}, ${name}—savor the moment, for your generosity will reap a bounty of love." },
            "Birch": { past: "Under ${country}’s frost-kissed skies, ${name}, the Birch whispered renewal into your bones, birthing your spirit anew in winter’s embrace.", future: "A fresh wind carries you in ${country}, ${name}—shed old skins, for the Birch heralds a path of rebirth." },
            "Oak": { past: "In ${country}’s ancient groves, ${name}, your roots sank deep, weathering storms with the Oak’s unyielding might.", future: "A mighty trunk stands in ${country}, ${name}—hold firm, for your strength will shelter generations to come." },
            "Falcon": { past: "Above ${country}’s wild skies, ${name}, your wings pierced the clouds, seeing truths hidden from earthbound eyes.", future: "A high perch awaits in ${country}, ${name}—soar with vision, for your clarity will guide the lost." },
            "Wolf": { past: "Through ${country}’s moonlit wilds, ${name}, your howl bound the pack, running fierce and free in nature’s song.", future: "A lunar call rises in ${country}, ${name}—lead with loyalty, for your pack will conquer any night." },
            "Fehu": { past: "In ${country}’s primal wells, ${name}, your spirit drew wealth from the earth, etching prosperity in rune-lit stone.", future: "A golden rune glows in ${country}, ${name}—claim your bounty, for your efforts will multiply under Fehu’s gaze." },
            "Ansuz": { past: "Amid ${country}’s whispering winds, ${name}, your voice carried divine breath, shaping fate with words of power.", future: "A sacred chant sounds in ${country}, ${name}—speak with wisdom, for your words will weave a tapestry of truth." },
            "Imbolc": { past: "In ${country}’s winter heart, ${name}, a spark of Imbolc lit your soul, warming the dark with promises of spring.", future: "A flame flickers in ${country}, ${name}—nurture it, for your light will bloom into a season of miracles." },
            "Samhain": { past: "Through ${country}’s veiled dusk, ${name}, Samhain parted the mists, revealing ancestors’ whispers in your blood.", future: "A shadow lifts in ${country}, ${name}—honor the unseen, for their guidance will unveil your deepest destiny." },
            "Ashwini": { past: "Under ${country}’s starry dawn, ${name}, Ashwini’s horses galloped through your birth, healing wounds with celestial speed.", future: "A swift star races in ${country}, ${name}—ride its energy, for your journey will mend and uplift the spirit." },
            "Krittika": { past: "In ${country}’s fiery cradle, ${name}, Krittika’s blades purified your soul, cutting ties to shadows of old.", future: "A sharp flame burns in ${country}, ${name}—wield it, for your clarity will sever doubt and forge purpose." },
            "Wood": { past: "In ${country}’s green embrace, ${name}, your spirit sprouted like wood, bending with life’s winds to grow tall.", future: "A new branch reaches in ${country}, ${name}—stretch upward, for your growth will touch the heavens." },
            "Fire": { past: "Amid ${country}’s blazing heart, ${name}, your soul was forged in fire, burning bright through trials of ash.", future: "A spark leaps in ${country}, ${name}—fan it, for your passion will illuminate paths unseen." },
            "Earth": { past: "In ${country}’s steady ground, ${name}, your spirit rooted deep, holding fast through quakes of fate.", future: "A mountain rises in ${country}, ${name}—stand firm, for your stability will anchor a world in flux." },
            "Metal": { past: "Through ${country}’s forged veins, ${name}, your soul rang like metal, tempered by the hammer of time.", future: "A blade shines in ${country}, ${name}—sharpen it, for your resolve will cut through chaos to truth." },
            "Water": { past: "In ${country}’s flowing streams, ${name}, your spirit danced with water, adapting to life’s endless tides.", future: "A river bends in ${country}, ${name}—flow with it, for your grace will carry you to depths of peace." },
            "Osiris": { past: "In ${country}’s sands of rebirth, ${name}, Osiris wove your soul through cycles of death and dawn.", future: "A green shoot breaks in ${country}, ${name}—rise again, for your renewal will defy the grave." },
            "Anubis": { past: "Beneath ${country}’s twilight gaze, ${name}, Anubis weighed your heart, guarding your steps through shadowlands.", future: "A jackal watches in ${country}, ${name}—trust its vigilance, for your path will balance justice and mercy." },
            "Crocodile": { past: "In ${country}’s primal waters, ${name}, the Crocodile bore you through currents, fierce and unyielding.", future: "A ripple stirs in ${country}, ${name}—strike with purpose, for your strength will seize the day." },
            "Serpent": { past: "Through ${country}’s coiled mists, ${name}, the Serpent shed your past, revealing wisdom in its scales.", future: "A hiss echoes in ${country}, ${name}—embrace change, for your rebirth will unlock ancient truths." }
        };

        const mysticMegFallbacks = {
            "Aries": "Today, ${name}, a red hawk circles ${country}’s skies—act swiftly, for its cry urges you to seize a moment of power before the sun dips low.",
            "Taurus": "In ${country}’s stillness today, ${name}, a buried seed hums beneath your feet—pause, listen, for its wisdom offers peace amid the storm.",
            "Gemini": "Twins of light flicker over ${country} today, ${name}—speak your truth, for their dance reveals a choice that shapes your spirit’s flight.",
            "Cancer": "A silver crab scuttles in ${country} today, ${name}—guard your heart, for its shell hides a treasure unveiled by the moon’s pull.",
            "Leo": "Today, ${name}, a golden mane glows in ${country}’s sun—stand tall, for your radiance will draw eyes and hearts to your throne.",
            "Virgo": "In ${country}’s quiet dusk today, ${name}, a star aligns—order your world, for precision will unveil a path to sacred calm.",
            "Libra": "A feather falls in ${country} today, ${name}—seek balance, for its gentle sway will guide you through a storm of doubt.",
            "Scorpio": "Today, ${name}, a black veil lifts in ${country}—dive deep, for the sting of truth will heal what lies buried.",
            "Sagittarius": "An arrow flies over ${country} today, ${name}—aim high, for its flight will pierce the veil to a truth long sought.",
            "Capricorn": "In ${country}’s shadow today, ${name}, a goat climbs—step carefully, for your ascent will reveal a peak of purpose.",
            "Aquarius": "A wild wind sweeps ${country} today, ${name}—dream freely, for its gusts will carry your vision to uncharted skies.",
            "Pisces": "Today, ${name}, a fish glints in ${country}’s waters—swim deep, for your dreams will surface with a message from the divine."
        };

        async function fetchReading(url, fallback, sign = null) {
            if (navigator.onLine) {
                try {
                    const proxyUrl = `https://cors-anywhere.herokuapp.com/${url}`;
                    const response = await fetch(proxyUrl);
                    const text = await response.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(text, "text/html");
                    const content = doc.querySelector(".horoscope-content p, .daily-horoscope p, .main-horoscope p, p:not(:empty)")?.textContent.trim() || fallback;
                    if (content.includes("CORS Anywhere") || content.length < 20) {
                        return fallback;
                    }
                    return `Today, ${name}, in ${country}, ${content}`;
                } catch (error) {
                    console.log(`Fetch failed for ${url}:`, error);
                    return fallback;
                }
            }
            return fallback;
        }

        async function generateHoroscope() {
            const name = document.getElementById("name").value;
            const dob = document.getElementById("dob").value;
            const country = document.getElementById("country").value;
            const resultDiv = document.getElementById("result");
            const readingList = document.getElementById("reading-list");

            if (!name || !dob || !country) {
                alert("Please fill all sacred fields.");
                return;
            }

            const dobDate = new Date(dob);
            const day = dobDate.getDate();
            const month = dobDate.getMonth() + 1;
            const year = dobDate.getFullYear();

            const zodiac = getZodiacSign(day, month);
            const element = getElement(zodiac);
            const chinese = getChineseZodiac(year);
            const celtic = getCelticTree(day, month);
            const native = getNativeAmericanSign(day, month);
            const nordic = getNordicRune(day, month);
            const pagan = getPaganSabbat(day, month);
            const hindu = getHinduNakshatra(day, month);
            const buddhist = getBuddhistElement(year);
            const egyptian = getEgyptianGod(day, month);
            const mayan = getMayanSign(day, month);
            const lifePath = getLifePathNumber(day, month, year);

            const zodiacIndex = ["Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius", "Capricorn", "Aquarius", "Pisces"].indexOf(zodiac) + 1;
            const chineseIndex = ["Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake", "Horse", "Goat", "Monkey", "Rooster", "Dog", "Pig"].indexOf(chinese) + 1;

            const mysticPresent = await fetchReading(
                `https://cafeastrology.com/${zodiac.toLowerCase()}dailyhoroscope.html`,
                mysticMegFallbacks[zodiac].replace("${name}", name).replace("${country}", country),
                zodiac
            );
            const westernPresent = await fetchReading(
                `https://www.astrology.com/horoscope/daily/${zodiac.toLowerCase()}.html`,
                `Today, ${name}, in ${country}, the stars weave a tapestry of mystery—seek the thread of courage to unravel your day’s purpose.`
            );
            const chinesePresent = await fetchReading(
                `https://www.horoscope.com/us/horoscopes/chinese/horoscope-chinese-daily.aspx?sign=${chineseIndex}`,
                `Today, ${name}, in ${country}, the lunar breath stirs ${chinese}’s spirit—listen to its quiet roar, for it guides you through shadow.`
            );
            const celticPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${celtic}’s branches sway—stand beneath them, for their whispers will root your soul in strength.`
            );
            const nativePresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${native}’s spirit flies—follow its gaze, for it sees a path through the wilds of your heart.`
            );
            const nordicPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${nordic}’s rune glows—trace its lines, for they carve a message of power in your day.`
            );
            const paganPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${pagan}’s wheel turns—step into its circle, for its rhythm will align your spirit with the divine.`
            );
            const hinduPresent = await fetchReading(
                `https://www.astrosage.com/horoscope/daily-${zodiac.toLowerCase()}-horoscope.asp`,
                `Today, ${name}, in ${country}, ${hindu}’s stars sing—heed their melody, for it tunes your soul to cosmic harmony.`
            );
            const buddhistPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${buddhist} flows through you—breathe its essence, for it balances your spirit’s dance.`
            );
            const egyptianPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${egyptian}’s gaze falls—kneel to its wisdom, for it guards your path through the sands of now.`
            );
            const mayanPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, ${mayan}’s cycle spins—align with its pulse, for it reveals a moment of eternal truth.`
            );
            const lifePathPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, your ${lifePath} vibrates—follow its hum, for it lights a step on your sacred journey.`
            );
            const angelPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, 333’s trinity surrounds you—open your heart, for its light whispers guidance from above.`
            );
            const countryPresent = await fetchReading(
                `https://www.tarot.com/daily-horoscope/${zodiac.toLowerCase()}`,
                `Today, ${name}, in ${country}, the land’s spirit stirs—feel its pulse, for it offers a sign to steer your day’s course.`
            );

            const readings = [
                `<div class="symbol">${symbolMap["MysticMeg"]}</div><span style="color:#ff33cc"><strong>Mystic Meg (${zodiac}):</strong><br><span class="past">Past:</span> ${staticReadings["MysticMeg"].past.replace("${name}", name).replace("${country}", country)}<br><span class="present">Present:</span> ${mysticPresent}<br><span class="future">Future:</span> ${staticReadings["MysticMeg"].future.replace("${name}", name).replace("${country}", country)}</span>`,
                `<div class="symbol">${symbolMap[zodiac]}</div><span style="color:#ff6666"><strong>Western (${zodiac}, ${element}):</strong><br><span class="past">Past:</span> ${staticReadings[zodiac]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, your soul was forged in cosmic fire."}<br><span class="present">Present:</span> ${westernPresent}<br><span class="future">Future:</span> ${staticReadings[zodiac]?.future.replace("${name}", name).replace("${country}", country) || "Destiny awaits you in ${country}, ${name}, written in stardust."}</span>`,
                `<div class="symbol">${symbolMap[chinese]}</div><span style="color:#ffcc66"><strong>Chinese (${chinese}):</strong><br><span class="past">Past:</span> ${staticReadings[chinese]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, ancient wisdom shaped your dawn."}<br><span class="present">Present:</span> ${chinesePresent}<br><span class="future">Future:</span> ${staticReadings[chinese]?.future.replace("${name}", name).replace("${country}", country) || "The lunar path lights your way in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[celtic]}</div><span style="color:#66ff66"><strong>Celtic (${celtic}):</strong><br><span class="past">Past:</span> ${staticReadings[celtic]?.past.replace("${name}", name).replace("${country}", country) || "Beneath ${country}’s skies, ${name}, roots grew deep."}<br><span class="present">Present:</span> ${celticPresent}<br><span class="future">Future:</span> ${staticReadings[celtic]?.future.replace("${name}", name).replace("${country}", country) || "Branches reach for light in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[native]}</div><span style="color:#66ccff"><strong>Native (${native}):</strong><br><span class="past">Past:</span> ${staticReadings[native]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, spirits guided your steps."}<br><span class="present">Present:</span> ${nativePresent}<br><span class="future">Future:</span> ${staticReadings[native]?.future.replace("${name}", name).replace("${country}", country) || "The wind carries your destiny in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[nordic]}</div><span style="color:#cc66ff"><strong>Nordic (${nordic}):</strong><br><span class="past">Past:</span> ${staticReadings[nordic]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, runes carved your tale."}<br><span class="present">Present:</span> ${nordicPresent}<br><span class="future">Future:</span> ${staticReadings[nordic]?.future.replace("${name}", name).replace("${country}", country) || "Fate weaves ahead in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[pagan]}</div><span style="color:#ff99cc"><strong>Pagan (${pagan}):</strong><br><span class="past">Past:</span> ${staticReadings[pagan]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, cycles turned at your dawn."}<br><span class="present">Present:</span> ${paganPresent}<br><span class="future">Future:</span> ${staticReadings[pagan]?.future.replace("${name}", name).replace("${country}", country) || "The wheel spins toward glory in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[hindu]}</div><span style="color:#66ffff"><strong>Hindu (${hindu}):</strong><br><span class="past">Past:</span> ${staticReadings[hindu]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, stars sang at your birth."}<br><span class="present">Present:</span> ${hinduPresent}<br><span class="future">Future:</span> ${staticReadings[hindu]?.future.replace("${name}", name).replace("${country}", country) || "Cosmic tides lift you in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[buddhist]}</div><span style="color:#ff9966"><strong>Buddhist (${buddhist}):</strong><br><span class="past">Past:</span> ${staticReadings[buddhist]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, elements shaped your origin."}<br><span class="present">Present:</span> ${buddhistPresent}<br><span class="future">Future:</span> ${staticReadings[buddhist]?.future.replace("${name}", name).replace("${country}", country) || "Harmony awaits in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[egyptian]}</div><span style="color:#ccff66"><strong>Egyptian (${egyptian}):</strong><br><span class="past">Past:</span> ${staticReadings[egyptian]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, Nile waters washed your past."}<br><span class="present">Present:</span> ${egyptianPresent}<br><span class="future">Future:</span> ${staticReadings[egyptian]?.future.replace("${name}", name).replace("${country}", country) || "Gods guard your tomorrow in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[mayan]}</div><span style="color:#66cc99"><strong>Mayan (${mayan}):</strong><br><span class="past">Past:</span> ${staticReadings[mayan]?.past.replace("${name}", name).replace("${country}", country) || "In ${country}, ${name}, ancient cycles birthed you."}<br><span class="present">Present:</span> ${mayanPresent}<br><span class="future">Future:</span> ${staticReadings[mayan]?.future.replace("${name}", name).replace("${country}", country) || "Time turns toward your fate in ${country}, ${name}."}</span>`,
                `<div class="symbol">${symbolMap[lifePath.toString()]}</div><span style="color:#ffcc99"><strong>Life Path (${lifePath}):</strong><br><span class="past">Past:</span> In ${country}, ${name}, your ${lifePath} carved a sacred groove through time’s vast terrain.<br><span class="present">Present:</span> ${lifePathPresent}<br><span class="future">Future:</span> The ${lifePath} illuminates a radiant journey ahead in ${country}, ${name}, guiding your eternal ascent.</span>`,
                `<div class="symbol">${symbolMap["333"]}</div><span style="color:#99ccff"><strong>Angel Number (333):</strong><br><span class="past">Past:</span> In ${country}, ${name}, the trinity of 3 cradled your spirit, weaving divinity into your dawn.<br><span class="present">Present:</span> ${angelPresent}<br><span class="future">Future:</span> Ascension calls through ${country}’s skies, ${name}, as 333 lifts you to celestial heights.</span>`,
                `<div class="symbol">${symbolMap[country]}</div><span style="color:#cc99ff"><strong>${country} Omens:</strong><br><span class="past">Past:</span> In ${country}, ${name}, ancient signs etched your birth into the land’s eternal memory.<br><span class="present">Present:</span> ${countryPresent}<br><span class="future">Future:</span> ${country}’s omens align for your glory, ${name}, heralding a future woven with cosmic intent.</span>`
            ];

            readingList.innerHTML = readings.map((item, i) => `<li style="animation-delay: ${i * 0.3}s;">${item}</li>`).join('');
            resultDiv.style.display = "block";
        }

        function saveReading() {
            const name = document.getElementById("name").value || "Unknown";
            const readingList = document.getElementById("reading-list").innerHTML;
            const textContent = `Philo Siphers Horoscope for ${name}\n\n${readingList.replace(/<[^>]+>/g, '').replace(/<br>/g, '\n')}`;
            const textBlob = new Blob([textContent], { type: "text/plain" });
            const textLink = document.createElement("a");
            textLink.href = URL.createObjectURL(textBlob);
            textLink.download = `${name}_horoscope.txt`;
            textLink.click();

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFont("helvetica");
            doc.setFontSize(12);
            doc.setTextColor(255, 204, 0);
            doc.text(`Philo Siphers Horoscope for ${name}`, 10, 10);
            doc.setTextColor(255, 255, 255);
            let y = 20;
            document.querySelectorAll("#reading-list li span").forEach((span) => {
                const text = span.textContent;
                doc.text(text, 10, y, { maxWidth: 180 });
                y += 15;
                if (y > 270) { doc.addPage(); y = 10; }
            });
            doc.save(`${name}_horoscope.pdf`);
        }

        function shareReading() {
            const name = document.getElementById("name").value || "Unknown";
            const readingList = document.getElementById("reading-list").innerHTML;
            const textContent = `Philo Siphers Horoscope for ${name}\n\n${readingList.replace(/<[^>]+>/g, '').replace(/<br>/g, '\n')}`;
            navigator.clipboard.writeText(textContent).then(() => {
                alert("Your cosmic prophecy has been copied to the clipboard!");
            }).catch(() => {
                alert("Failed to copy to clipboard. Please try again.");
            });
        }
    </script>
</body>
</html>